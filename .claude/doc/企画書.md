# 顔画像 × 黄金比 PoC 企画書

## 🎯 プロジェクト概要

スマホ Web で撮影/アップロードした顔画像を対象に、  
**顔ランドマーク検出 → 黄金比ベースの特徴抽出 → 人気施術カテゴリとの紐付けスコア化**  
を行い、ユーザーに簡易的なアドバイスを返す PoC を開発する。

目的：

- 実装の成立性確認（オンデバイス推論、0〜100 点スコア）
- UI/UX の叩き台
- 今後の施術マッピング・拡張機能に向けた基盤づくり

---

## 🧩 機能範囲（PoC）

1. **画像入力**
   - スマホカメラ（`getUserMedia`）またはファイルアップロード
   - EXIF 補正、リサイズ（長辺 1280 程度）
2. **ランドマーク検出**
   - MediaPipe Face Landmarker（WASM/WebGL）
   - 468 点座標を取得
3. **特徴量抽出**
   - 目：水平長、開口、傾き
   - 鼻：鼻翼幅、鼻尖投影
   - 顎：エラ幅、顎角、下顔面比
4. **品質チェック**
   - 顔角度（±15° 以内）、明るさ閾値
   - 条件 NG なら「再撮影ガイド」表示
5. **出力**
   - Eye/Nose/Jaw 各スコア（0〜100 点）
   - 簡易施術候補（例：Eye→ 二重埋没/目頭/涙袋）

---

## 📊 マイルストーン（3 ステップ）

### STEP1：入力・検出・正規化

- 撮影/アップロード
- MediaPipe でランドマーク検出
- 特徴量算出（IPD, EyeLen, Alar 幅, 顎幅 等）
- 品質フラグを返却
- UI：ランドマーク重畳表示、特徴量デバッグ

### STEP2：スコアリング & 助言マッピング

- 各指標を基準レンジと比較、偏差を算出
- Eye/Nose/Jaw の 0〜100 スコアを計算
- 固定テーブルで施術候補を提示
- UI：ゲージ表示＋「根拠を見る」で詳細を展開

### STEP3：PWA 化 & 計測

- ローカル履歴保存（IndexedDB）
- A/B テスト用の文言差し替え機能
- 簡易デプロイ（Vercel フロント／Railway バック）
- エラーハンドリングと削除 UI 整備

---

## 🏗️ 技術スタック（PoC）

- **フロント**: Vite + React + TypeScript
- **ランドマーク**: MediaPipe Face Landmarker (WASM)
- **状態管理**: React hooks（最小構成）
- **ストレージ**: IndexedDB（履歴）
- **デプロイ**: Vercel (フロント)、Railway (API モック)

---

## 📂 ディレクトリ構成（STEP1 時点）
